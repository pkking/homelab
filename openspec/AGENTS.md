# 与 AI 代理的协作工作流

本文档定义了你（项目所有者）与我（AI 代理 Roo）在此项目上的协作方式。我们的目标是建立一个清晰、高效且完全由你掌控的开发流程。

## 核心理念

*   **你来决策，我来执行:** 你是项目的最终决策者。我负责提供方案、编写代码和执行操作，但每一步都需要你的明确批准。
*   **清晰的文档:** 所有的变更都始于一份清晰的变更提案 (Change Proposal)，确保我们在动手之前对目标和方案达成一致。
*   **迭代式开发:** 我们将复杂任务分解为小步骤，逐步完成，方便你随时审查和调整。

## OpenSpec 工作流

这是一个典型的功能开发或项目变更的完整流程：

```mermaid
graph TD
    A[1. 任务定义 <br> (你)] --> B{2. 方案设计 & 提案 <br> (我)};
    B --> C{3. 提案审查 <br> (你)};
    C -- 批准 --> D{4. 制定执行计划 <br> (我)};
    C -- 修改 --> B;
    D --> E{5. 计划审查 <br> (你)};
    E -- 批准 --> F[6. 分步执行 <br> (我 & 你)];
    E -- 修改 --> D;
    F --> G((7. 完成 & 验证 <br> (你)));
```

### 步骤详解

1.  **任务定义 (你):**
    你提出一个高层次的目标。例如：“我想为我的应用添加用户认证功能”或“我们需要一个监控系统”。

2.  **方案设计 & 提案 (我):**
    我会进行信息收集（提问或读取文件），然后创建一个详细的**变更提案 (Change Proposal, CP)** 文件（就像我们刚才创建的 `001-monitoring-stack.md`）。这份提案会说明：
    *   **要做什么 (Summary):** 变更的核心内容。
    *   **为什么要做 (Motivation):** 变更带来的价值。
    *   **怎么做 (Proposed Design):** 具体的技术方案和实现路径。
    *   **其他选项 (Alternatives):** 考虑过的其他方案及其优劣。

3.  **提案审查 (你):**
    你仔细阅读变更提案。这是关键的决策点。你可以：
    *   **批准:** 同意该方案，我们可以进入下一步。
    *   **要求修改:** 你可以提出修改意见，我会更新提案，直到你满意为止。
    *   **拒绝:** 如果你认为这个方向不对，我们可以随时中止。

4.  **制定执行计划 (我):**
    一旦提案被批准，我会将“提案设计”中的步骤具体化，创建一个清晰的、可执行的 **TODO 清单**。

5.  **计划审查 (你):**
    你审查这份 TODO 清单，确保它符合你的预期。

6.  **分步执行 (我和你):**
    我会按照 TODO 清单，一步一步地执行任务。对于每一步操作（例如创建文件、修改代码），我都会向你发起请求，**等待你的批准后才会继续**。这通常需要切换到 `💻 Code` 模式来完成。

7.  **完成 & 验证 (你):**
    所有步骤执行完毕后，我会通知你功能已完成。由你来最终验证变更是否符合预期。

---

遵循这个流程，我们可以确保每一次变更都经过深思熟虑，并且整个过程都在你的掌控之中。
